<ion-content class="ion-padding" *ngIf="course$ | async as course">
  <ion-grid>
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-lg="10" size-xl="9">
        <ion-title class="st-title">
          Course: [{{ course.shortName }}] {{ course.longName }}
        </ion-title>
      </ion-col>
    </ion-row>

    <!-- all course tests - view for teacher and markers -->
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-lg="10" size-xl="9">
        <app-generic-card [title]="'Course tests'">
          <app-course-test-public-table
            (clickedEmitter)="redirectToCourseTest($event)"
            [courseTests]="courseTests$ | async">
          </app-course-test-public-table>
          <ion-buttons class="ion-justify-content-end st-small-padding">
            <ion-button color="primary" class="st-small-padding" (click)="redirectToCourseTestCreate()">
              Create test
            </ion-button>
          </ion-buttons>
        </app-generic-card>
      </ion-col>
    </ion-row>

    <!-- upcoming tests - view for students -->
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-lg="10" size-xl="9">
        <app-generic-card [title]="'Upcoming tests'">
          <app-course-test-public-table
            (clickedEmitter)="startTest($event)"
            [courseTests]="course.confirmedTests">
          </app-course-test-public-table>
        </app-generic-card>
      </ion-col>
    </ion-row>

    <!-- completed tests - view for students -->
    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-lg="10" size-xl="9">
        <app-generic-card [title]="'Completed tests'">
          <app-course-test-student-completed-table
            [courseTakenTests]="studentTests$ | async">
          </app-course-test-student-completed-table>
        </app-generic-card>
      </ion-col>
    </ion-row>

    <ion-row class="ion-justify-content-center">
      <ion-col size="12" size-lg="10" size-xl="9">
        <ion-row>
          <!-- course members-->
          <ion-col size="12" size-lg="8">
            <app-generic-card [title]="'Course members'">
              <!-- markers -->
              <app-account-identification-list
                [title]="'Evaluators'"
                [members]="course.markers">
              </app-account-identification-list>

              <!-- students -->
              <app-account-identification-list
                [title]="'Students'"
                [enableClick]="true"
                [members]="course.students">
              </app-account-identification-list>
            </app-generic-card>
          </ion-col>

          <!-- grades -->
          <ion-col size="12" size-lg="4">
            <ion-row>
              <ion-col size="12">
                <app-generic-card [title]="'Course grading'">
                  <app-course-grades-table [grades]="course.gradings">
                  </app-course-grades-table>
                  <ion-buttons class="ion-justify-content-end c-small-padding">
                    <ion-button color="warning" class="c-small-padding">Edit</ion-button>
                  </ion-buttons>
                </app-generic-card>
              </ion-col>
            </ion-row>
            <ion-row>
              <ion-col size="12">
                <app-generic-card [title]="'Invite member'">
                  <app-account-search (clickedUserEmitter)="inviteUser($event, course)"></app-account-search>
                </app-generic-card>
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
